<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asesor Virtual Universitario</title>
    <link rel="stylesheet" href="../static/style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
</head>

<body>
    <div class="login-container" style="max-width: 1200px">
        <div class="login-card">
            <div class="login-header">
                <div class="logo-icon">⚡</div>
                <h2>Asesor Virtual Universitario</h2>
                <p>Completa el formulario para obtener recomendaciones personalizadas</p>
            </div>

            <!-- FORMULARIO -->
            <form id="loginForm" class="login-form" novalidate>

                <div class="section-title">Información Personal</div>

                <div class="form-row">
                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="text" id="nombre" name="nombre" required>
                            <label for="nombre">Nombre Completo</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="number" id="edad" name="edad" required min="16" max="100">
                            <label for="edad">Edad</label>
                        </div>
                    </div>
                </div>

                <div class="section-title">Situación del Estudiante</div>

                <!-- TRABAJA -->
                <div class="form-group">
                    <label class="radio-group-label">¿Trabaja?</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="trabaja" value="si" required>
                            <span class="radio-text">Si</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="trabaja" value="no" required>
                            <span class="radio-text">No</span>
                        </label>
                    </div>
                </div>

                <!-- HOLGURA -->
                <div class="form-group">
                    <label class="radio-group-label">¿Dispone de tiempo de holgura?</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="horario" value="si" required>
                            <span class="radio-text">Si</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="horario" value="no" required>
                            <span class="radio-text">No</span>
                        </label>
                    </div>
                </div>

                <!-- DISTANCIA -->
                <div class="form-group">
                    <label class="radio-group-label">¿Reside lejos de la facultad?</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="distancia" value="si" required>
                            <span class="radio-text">Si</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="distancia" value="no" required>
                            <span class="radio-text">No</span>
                        </label>
                    </div>
                </div>

                <!-- HORAS SEMANALES -->
                <div class="form-group"> <label class="range-label"> Horas disponibles en la semana: <span
                            id="presupuestoValue">10 hs</span> </label> <input type="range" id="presupuesto"
                        name="presupuesto" min="1" max="50" value="10" step="1" class="range-input">
                    <div class="range-labels"> <span>1 hs</span> <span>50 hs</span> </div>
                </div>
                <!-- <div class="form-group"> <label class="select-label">Modalidad de cursado que prefiere</label> <div class="select-wrapper"> <select id="area" name="area" required> <option value="">Selecciona un área</option> <option value="ciencias">Presencial</option> <option value="ingenieria">Virtual</option> <option value="humanidades">Híbrido</option> </select> <span class="select-arrow"></span> </div> <span class="error-message" id="areaError"></span> </div> -->
                <!-- Preferencias -->
                <div class="section-title">Información de Estudio</div>
                <div class="form-group"> <label class="checkbox-group-label">Errores que comete generalmente</label>
                    <div class="checkbox-group"> <label class="checkbox-label"> <input type="checkbox" name="intereses"
                                id="terminos" value="programacion"> <span class="custom-checkbox"></span> <span
                                class="checkbox-text">Procrastinacion antes de parciales</span> </label> <label
                            class="checkbox-label"> <input type="checkbox" name="intereses" value="diseno"> <span
                                class="custom-checkbox"></span> <span class="checkbox-text">No revisar
                                cronogramas</span> </label> <label class="checkbox-label"> <input type="checkbox"
                                name="intereses" value="matematicas"> <span class="custom-checkbox"></span> <span
                                class="checkbox-text">Inscribirse en demasiadas materias</span> </label> <label
                            class="checkbox-label"> <input type="checkbox" name="intereses" value="idiomas"> <span
                                class="custom-checkbox"></span> <span class="checkbox-text">Estudiar el ultimo
                                dia</span> </label> <label class="checkbox-label"> <input type="checkbox"
                                name="intereses" value="investigacion"> <span class="custom-checkbox"></span> <span
                                class="checkbox-text">Ignorar correlatividades</span> </label> </div>
                </div>
                <div class="form-group"> <label class="checkbox-group-label">Estrategias de Estudio</label>
                    <div class="checkbox-group"> <label class="checkbox-label"> <input type="checkbox"
                                name="estrategias" value="programacion"> <span class="custom-checkbox"></span> <span
                                class="checkbox-text">Micro-estudios de alrededor de 30 minutos</span> </label> <label
                            class="checkbox-label"> <input type="checkbox" name="estrategias" value="diseno"> <span
                                class="custom-checkbox"></span> <span class="checkbox-text">Rutina semanal
                                estricta</span> </label> <label class="checkbox-label"> <input type="checkbox"
                                name="estrategias" value="matematicas"> <span class="custom-checkbox"></span> <span
                                class="checkbox-text">Estudiar con anticipacion</span> </label> <label
                            class="checkbox-label"> <input type="checkbox" name="estrategias" value="idiomas"> <span
                                class="custom-checkbox"></span> <span class="checkbox-text">Grabar clases para
                                revisar</span> </label> </div>
                </div>
                <div class="form-group"> <label class="radio-group-label">Modalidad de Dictado de clases
                        preferida</label>
                    <div class="radio-group"> <label class="radio-label"> <input type="radio" name="modalidad"
                                value="presencial" required> <span class="custom-radio"></span> <span
                                class="radio-text">Presencial</span> </label> <label class="radio-label"> <input
                                type="radio" name="modalidad" value="virtual" required> <span
                                class="custom-radio"></span> <span class="radio-text">Virtual</span> </label> <label
                            class="radio-label"> <input type="radio" name="modalidad" value="hibrida" required> <span
                                class="custom-radio"></span> <span class="radio-text">Híbrida</span> </label> </div>
                    <!-- <span class="error-message" id="modalidadError"></span> -->
                </div>
                <div class="form-group"> <label class="radio-group-label">Tiempo de Estudio</label>
                    <div class="radio-group"> <label class="radio-label"> <input type="radio" name="tiempo"
                                value="presencial" required> <span class="custom-radio"></span> <span
                                class="radio-text">Menos de 10 horas semanales</span> </label> <label
                            class="radio-label"> <input type="radio" name="tiempo" value="virtual" required> <span
                                class="custom-radio"></span> <span class="radio-text">Entre 10 y 20 horas
                                semanales</span> </label> <label class="radio-label"> <input type="radio" name="tiempo"
                                value="hibrida" required> <span class="custom-radio"></span> <span
                                class="radio-text">Más de 20 horas semanales</span> </label> </div> <span
                        class="error-message" id="modalidadError"></span>
                </div>
                <div class="section-title">Materias Aprobadas</div>

                <div class="form-group">
                    <div class="checkbox-group">

                        {% for m in materias %}
                        <label class="checkbox-label">
                            <input type="checkbox" name="materias_aprobadas" value="{{ m.codigo }}">
                            <span class="checkbox-text">{{ m.nombre }}</span>
                        </label>
                        {% endfor %}

                    </div>
                </div>

                <!-- BOTÓN -->
                <button type="button" class="login-btn btn" onclick="enviarFormulario()">
                    <span class="btn-text">OBTENER RECOMENDACIONES</span>
                </button>

            </form>

            <!-- RESULTADO DINÁMICO -->
            <div id="resultadoBox" style="margin-top:20px; font-size:18px;"></div>

            <div class="success-message" id="successMessage" style="display:none;">
                <div class="success-icon">✓</div>
                <h3>¡Formulario Enviado!</h3>
                <p>Procesando tus recomendaciones...</p>
            </div>

        </div>
    </div>


    <!-- SCRIPT AJAX -->
    <script>
        function enviarFormulario() {
            const form = document.getElementById("loginForm");
            const formData = new FormData(form);

            fetch("/procesar", {
                method: "POST",
                body: formData
            })
                .then(r => r.json())
                .then(data => {

                    document.getElementById("successMessage").style.display = "block";

                    document.getElementById("resultadoBox").innerHTML =
                        `<h2>Recomendación: ${data.resultado}</h2>`;
                })
                .catch(err => console.error("Error:", err));
        }
    </script>

</body>

</html>